// Copyright 2024 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

#include <utility>
#include <vector>

#include "absl/log/absl_check.h"
#include "absl/status/statusor.h"
#include "absl/types/span.h"
#include "ink/geometry/angle.h"
#include "ink/geometry/point.h"
#include "ink/strokes/input/recorded_test_inputs_data.h"
#include "ink/strokes/input/stroke_input.h"
#include "ink/strokes/input/stroke_input_batch.h"
#include "ink/types/duration.h"

namespace ink {

namespace {

// Local instance of label constant to make below more concise:
constexpr StrokeInput::ToolType kStylus = StrokeInput::ToolType::kStylus;

StrokeInput MakeInput(StrokeInput::ToolType tool_type, Point position,
                      float elapsed_time_seconds, float pressure,
                      float tilt_in_multiples_of_pi,
                      float orientation_in_multiples_of_pi) {
  return {
      .tool_type = tool_type,
      .position = position,
      .elapsed_time = Duration32::Millis(elapsed_time_seconds),
      .pressure = pressure,
      .tilt = tilt_in_multiples_of_pi * kPi,
      .orientation = orientation_in_multiples_of_pi * kPi,
  };
}

StrokeInputBatch MakeBatch(absl::Span<const StrokeInput> inputs) {
  absl::StatusOr<StrokeInputBatch> result = StrokeInputBatch::Create(inputs);
  ABSL_CHECK_OK(result);
  return *std::move(result);
}

}  // namespace

std::vector<std::pair<StrokeInputBatch, StrokeInputBatch>>
MakeStraightLineRaw() {
  return {{MakeBatch({{MakeInput(kStylus, {.x = 518.5, .y = 392.5}, 16.00000075,
                                 0.393407, 0.106117, 1.46601)}}),
           {}},
          {MakeBatch({{MakeInput(kStylus, {.x = 518.5, .y = 392.5}, 32.99999975,
                                 0.436874, 0.106117, 1.46601)}}),
           {}},
          {MakeBatch({{MakeInput(kStylus, {.x = 518.5, .y = 392.5}, 49.0000025,
                                 0.452259, 0.106117, 1.46601)}}),
           {}},
          {MakeBatch({{MakeInput(kStylus, {.x = 518.5, .y = 392.5}, 65.99999975,
                                 0.498901, 0.106117, 1.46601)}}),
           {}},
          {MakeBatch({{MakeInput(kStylus, {.x = 517.5, .y = 392.5}, 70.00000025,
                                 0.498901, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 516.976, .y = 392.431},
                                 74.000001, 0.472005, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 517, .y = 392.5}, 74.000001,
                                 0.498901, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 516.432, .y = 392.437},
                                 78.0000015, 0.43357, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 516.5, .y = 392.5}, 79.00000375,
                                 0.498901, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 515.896, .y = 392.55},
                                 83.00000425, 0.326119, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 515, .y = 392.5}, 83.00000425,
                                 0.560928, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 514.659, .y = 392.531},
                                 87.000005, 0.476957, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 514.056, .y = 392.679},
                                 91.0000055, 0.483805, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 513.594, .y = 392.809},
                                 95.00000625, 0.517849, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 513.043, .y = 392.972},
                                 99.000007, 0.522684, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 514, .y = 393}, 86.000003,
                                 0.560928, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 513.665, .y = 393.17},
                                 90.0000035, 0.450211, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 513.099, .y = 393.504},
                                 95.00000625, 0.518225, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 512.817, .y = 393.676},
                                 99.000007, 0.54577, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 512.406, .y = 393.934},
                                 103.0000075, 0.550302, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 511.901, .y = 394.261},
                                 107.00000825, 0.560255, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 511.5, .y = 392.5}, 91.0000055,
                                 0.560928, 0.106117, 1.46601)}}),
           {}},
          {MakeBatch({{MakeInput(kStylus, {.x = 507.5, .y = 391.5}, 95.00000625,
                                 0.560928, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 506.27, .y = 390.948},
                                 99.000007, 0.541056, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 504.339, .y = 389.919},
                                 104.00000225, 0.471907, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 502.847, .y = 389.178},
                                 108.00000275, 0.47031, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 501.413, .y = 388.439},
                                 112.0000035, 0.474995, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 499.927, .y = 387.697},
                                 116.000004, 0.486488, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 502.5, .y = 390}, 99.000007,
                                 0.638828, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 500.652, .y = 388.47},
                                 103.0000075, 0.684021, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 498.224, .y = 386.485},
                                 108.00000275, 0.638498, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 496.055, .y = 384.701},
                                 112.0000035, 0.640457, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 493.927, .y = 382.893},
                                 116.000004, 0.641054, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 498.5, .y = 388.5}, 103.0000075,
                                 0.638828, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 496.678, .y = 386.983},
                                 107.00000825, 0.642265, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 494.327, .y = 384.892},
                                 111.000009, 0.621891, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 492.206, .y = 382.692},
                                 115.000002, 0.618035, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 490.078, .y = 380.29},
                                 120.00000475, 0.613167, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 493.5, .y = 386}, 107.00000825,
                                 0.638828, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 490.568, .y = 384.344},
                                 111.000009, 0.639328, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 486.747, .y = 382.163},
                                 116.000004, 0.643029, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 482.803, .y = 379.878},
                                 120.00000475, 0.630066, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 479.114, .y = 377.621},
                                 124.0000055, 0.623449, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 475.098, .y = 375.201},
                                 128.000006, 0.6274, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 487.5, .y = 383.5}, 112.0000035,
                                 0.638828, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 483.199, .y = 381.038},
                                 116.000004, 0.644367, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 478.818, .y = 377.933},
                                 120.00000475, 0.646422, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 475.166, .y = 375.232},
                                 124.0000055, 0.642783, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 471.866, .y = 372.759},
                                 129.000008, 0.636812, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 481.5, .y = 379.5}, 116.000004,
                                 0.692308, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 476.697, .y = 375.915},
                                 120.00000475, 0.678711, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 472.112, .y = 372.09},
                                 124.0000055, 0.6784, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 468.103, .y = 368.664},
                                 128.000006, 0.678986, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 464.618, .y = 365.664},
                                 133.00000125, 0.67322, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 469, .y = 370.5}, 120.00000475,
                                 0.692308, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 460.671, .y = 363.091},
                                 124.0000055, 0.693581, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 453.358, .y = 355.62},
                                 128.000006, 0.703219, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 447.108, .y = 349.257},
                                 131.99999925, 0.702025, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 441.599, .y = 343.628},
                                 136.0000075, 0.699459, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 459, .y = 363.5}, 124.0000055,
                                 0.692308, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 450.941, .y = 357.217},
                                 128.000006, 0.697374, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 443.723, .y = 349.848},
                                 131.99999925, 0.69976, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 437.865, .y = 343.202},
                                 136.0000075, 0.700366, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 433.221, .y = 337.729},
                                 141.0000025, 0.692727, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 449.5, .y = 357}, 129.000008,
                                 0.692308, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 441.005, .y = 350.641},
                                 133.00000125, 0.702649, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 433.225, .y = 344.046},
                                 137.0000095, 0.694647, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 425.941, .y = 337.403},
                                 141.0000025, 0.690847, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 419.854, .y = 331.723},
                                 145.00001075, 0.684152, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 439.5, .y = 350}, 133.00000125,
                                 0.69011, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 431.721, .y = 343.73},
                                 137.0000095, 0.688755, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 423.926, .y = 336.845},
                                 141.0000025, 0.685441, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 416.798, .y = 330.511},
                                 145.00001075, 0.668072, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 410.662, .y = 325.056},
                                 149.000004, 0.659708, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 431, .y = 343}, 136.0000075,
                                 0.69011, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 423.441, .y = 337.106},
                                 140.0000005, 0.67863, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 416.193, .y = 331.132},
                                 145.00001075, 0.672168, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 409.978, .y = 326.061},
                                 149.000004, 0.664928, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 404.866, .y = 321.842},
                                 153.000012, 0.65682, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 421.5, .y = 336}, 141.0000025,
                                 0.69011, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 413.396, .y = 329.498},
                                 145.00001075, 0.681129, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 405.649, .y = 322.702},
                                 149.000004, 0.675478, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 398.604, .y = 316.545},
                                 153.000012, 0.666206, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 392.555, .y = 311.207},
                                 157.00000525, 0.659076, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 412.5, .y = 329}, 145.00001075,
                                 0.69011, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 404.419, .y = 322.425},
                                 149.000004, 0.681644, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 396.549, .y = 315.551},
                                 154.000014, 0.677203, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 389.189, .y = 309.155},
                                 158.00000725, 0.668775, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 382.855, .y = 303.604},
                                 162.0000005, 0.661197, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 404.5, .y = 322.5}, 149.000004,
                                 0.623932, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 397.089, .y = 316.377},
                                 153.000012, 0.62281, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 390.35, .y = 310.306},
                                 158.00000725, 0.605955, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 384.324, .y = 304.832},
                                 162.0000005, 0.589439, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 379.348, .y = 300.247},
                                 166.0000085, 0.58158, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 397, .y = 317}, 153.000012,
                                 0.623932, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 390.464, .y = 311.889},
                                 157.00000525, 0.610372, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 384.774, .y = 307.075},
                                 161.00001325, 0.593488, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 379.956, .y = 302.944},
                                 165.0000065, 0.576748, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 376.072, .y = 299.569},
                                 169.00001475, 0.569267, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 372.55, .y = 296.55}, 174.00001,
                                 0.570764, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 389.5, .y = 311.5},
                                 157.00000525, 0.623932, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 383.38, .y = 307.01},
                                 161.00001325, 0.601172, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 377.58, .y = 302.808},
                                 166.0000085, 0.58576, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 372.873, .y = 299.456},
                                 170.00000175, 0.571047, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 368.981, .y = 296.67},
                                 174.00001, 0.564278, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 382.5, .y = 306.5}, 162.0000005,
                                 0.623932, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 376.679, .y = 302.415},
                                 166.0000085, 0.598293, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 371.132, .y = 298.445},
                                 170.00000175, 0.584446, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 366.707, .y = 295.286},
                                 174.00001, 0.572632, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 363.021, .y = 292.629},
                                 179.00000525, 0.566475, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 376.5, .y = 302}, 166.0000085,
                                 0.623932, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 371.311, .y = 298.242},
                                 170.00000175, 0.613379, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 366.583, .y = 294.86},
                                 174.00001, 0.60359, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 362.949, .y = 292.256},
                                 178.000003, 0.594556, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 359.914, .y = 290.063},
                                 183.00001325, 0.588863, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 372.5, .y = 299.5},
                                 169.00001475, 0.623932, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 369.172, .y = 297.351},
                                 174.00001, 0.612792, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 366.426, .y = 295.482},
                                 178.000003, 0.599509, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 364.433, .y = 294.078},
                                 182.00001125, 0.588842, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 362.638, .y = 292.796},
                                 186.0000045, 0.582932, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 368.5, .y = 300.5}, 174.00001,
                                 0.623932, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 366.456, .y = 300.697},
                                 178.000003, 0.605269, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 363.284, .y = 301.257},
                                 182.00001125, 0.583443, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 361.152, .y = 301.697},
                                 186.0000045, 0.570308, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 359.241, .y = 302.114},
                                 190.0000125, 0.56616, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 366, .y = 303.5}, 178.000003,
                                 0.623932, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 365.03, .y = 305.575},
                                 183.00001325, 0.594407, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 364.304, .y = 307.914},
                                 187.0000065, 0.584921, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 363.797, .y = 309.793},
                                 191.0000145, 0.56655, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 363.425, .y = 311.496},
                                 195.00000775, 0.562266, 0.106117, 1.46601)}})},
          {MakeBatch({{MakeInput(kStylus, {.x = 365, .y = 307.5}, 182.00001125,
                                 0.623932, 0.106117, 1.46601)}}),
           MakeBatch({{MakeInput(kStylus, {.x = 364.428, .y = 310.653},
                                 187.0000065, 0.586411, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 364.072, .y = 313.752},
                                 191.0000145, 0.579602, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 363.754, .y = 317.092},
                                 195.00000775, 0.562101, 0.106117, 1.46601)},
                      {MakeInput(kStylus, {.x = 363.562, .y = 320.258},
                                 199.00001575, 0.55843, 0.106117, 1.46601)}})}};
}  // NOLINT(readability/fn_size)

}  // namespace ink
